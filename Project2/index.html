<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Web Scanner — VulWebScanner</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <svg class="logo" width="36" height="36" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M12 2L2 7v7c0 5 4 9 10 9s10-4 10-9V7l-10-5z"></path>
        </svg>
        <div>
          <h1 class="site-title">Mini Web Scanner</h1>
          <p class="site-sub">Quick vulnerability scan for your own targets</p>
        </div>
      </div>

      <nav class="nav">
        <a href="#" class="nav-link">Home</a>
        <a href="#" class="nav-link">Docs</a>
        <a href="{{ url_for('results') }}" class="btn ghost">Past results</a>
      </nav>
    </div>
  </header>

  <main class="container main">
    <section class="card hero">
      <div class="hero-left">
        <h2>Scan your web application</h2>
        <p class="lead">Enter the target URL (only test assets you own or have permission to test).</p>

        <form method="post" class="scan-form" novalidate>
          <label class="field">
            <span class="field-label">Target URL</span>
            <input name="target" class="input" placeholder="https://example.com" required />
          </label>

          <div class="form-row">
            <button type="submit" class="btn primary">Start Scan</button>
            <a class="btn secondary" href="{{ url_for('results') }}">View results</a>
          </div>

          <p class="muted note">Note: scanning without permission is illegal. Use responsibly.</p>
        </form>
      </div>

      <div class="hero-right">
        <div class="stat">
          <div class="stat-num">Fast</div>
          <div class="stat-label">Lightweight checks</div>
        </div>
        <div class="stat">
          <div class="stat-num">Safe</div>
          <div class="stat-label">Non-destructive</div>
        </div>
      </div>
    </section>

    <!-- Flash messages (Flask) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flashes">
          {% for cat, msg in messages %}
            <div class="flash {{ 'success' if cat == 'success' else 'error' }}">
              {{ msg }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Example results table (if you render results here) -->
    {% if results %}
    <section class="card">
      <h3>Recent scan</h3>
      <table class="results-table">
        <thead>
          <tr><th>Target</th><th>Status</th><th>Issues</th><th>Time</th></tr>
        </thead>
        <tbody>
          {% for r in results %}
          <tr>
            <td>{{ r.target }}</td>
            <td>{{ r.status }}</td>
            <td>{{ r.issues_count }}</td>
            <td>{{ r.timestamp }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
    {% endif %}
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>© {{ current_year or "2025" }} Mini Web Scanner — Use only with permission.</small>
    </div>
  </footer>
</body>
</html>
